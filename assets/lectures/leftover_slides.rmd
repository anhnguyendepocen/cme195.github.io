---
title: "Left over slides"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## When should you use R?

- R can be used for **data analysis and visualization**. 

> - It provides efficient **exploration and prototyping** tools, 
but also offers powerful frameworks for **building and fitting statistical models**.

> - R is very good when working with **data that fits in the computer’s memory**.

> - It’s NOT as good for working with massive datasets whose elements 
need to be continuously accessed.


## Working Directory

<div class="left", style="width: 50%">

- The **current working directory** (cmd) is the location
which R is currently pointing to

- Whenever you try to read or save a file without specifying 
the path explicitly, the cmd will be used by default.

- When are executing code from an R markdown/notebook code chunk, 
the cmd is **the location of the document**.

</div>

<div class="right", style="width: 50%">

- To see the current working directory use `getwd()`:
```{r}
getwd()   # with no arguments
```

- To change the working directory use `setwd(path_name)` 
with a specified path as na argument:
```{r eval = FALSE}
setwd("path/to/directory")
```
</div>


## Paths and directory names

- In Windows, a directory usually has an address of the following form: `C:\Users\lan\folder`.

- R inherits its file and folder naming conventions from unix, and instead uses forward slashes
instead of backslashes, e.g. `C:/Users/lan/folder/`

- The Mac OSX already uses the unix standards, the address is usually of the form: `/home/lan/folder/`.

- So, when working in R use the forward slashes "/".

- Actually for Windows, you can use either "`C:/Path/To/A/File`" or "`C:\\Path\\To\\A\\File`".


## Paths and directory names

- R uses forward slashes for the directories, because backslashes serve 
a different purpose. They are used as escape characters to isolate special 
characters and stop them from being immediately interpreted.

- To avoid problems, directory names should NOT contain spaces and special characters.

-  Use a "`Tab`" for autocompletion to find file paths more easily. 



## Data import 

- **Text Files in a table format** can be read and saved 
to a selected variable using a `read.table()` function.
Use `?read.table` to learn more about the function.

- A common text file format is a **comma delimited text file**,
`.csv`. These files use a comma as column separators, e.g:

```{r eval = FALSE}
Year,Student,Major
2009, John Doe,Statistics
2009, Bart Simpson, Mathematics I
```

- To read these files use the following command:

```{r eval=FALSE}
mydata <- read.table("path/to/filename.csv", header=TRUE,  sep = ",")
# read.csv() has covenient argument defaults for '.csv' files
mydata <- read.csv("path/to/filename.csv")
```

- Optionally, use `row.names` or `col.names` arguments
to set the row and column names.


## Data import 

- **Excel files**. To read the excel files you need
to first install a package "xlsx". Simply run 
`install.packages("xlsx")`.

```{r eval = FALSE}
# first row contains variable names
library(xlsx)
# read the 1st worksheet
mydata <- read.xlsx("/path/to/filename.xlsx", 1)  

# read in the worksheet named mysheet
mydata <- read.xlsx("/path/to/filename.xlsx", sheetName = "mysheet")
```

- **SAS files**. You need to install the `Hmisc` or `foreign` 
packages first.

```{r eval = FALSE}
# First, save your SAS dataset in trasport (xport) format
libname out xport 'path/to/filename.xpt';
data out.mydata;
set sasuser.mydata;
run;

# Then, in R 
library(Hmisc)
mydata <- sasxport.get("path/to/filename.xpt")
# character variables are converted to R factors
# or
library(foreign)
mydata <- read.xport("path/to/filename.xpt")
```


## Data export

- **Text files**:
```{r eval = FALSE}
write.table(mydata, "path/to/filename.txt", sep="\t")  # tab-delimited
write.table(mydata, "path/to/filename.csv", sep=",")   # comma-delimited
write.csv(mydata, "path/to/filename.csv")              # comma-delimited
```

- **Excel spreadsheet**:

```{r eval = FALSE}
library(xlsx)
write.xlsx(mydata, "path/to/filename.xlsx")
```

- **SAS** files:
```{r eval = FALSE}
# write out text datafile and an SAS program to read it
library(foreign)
write.foreign(mydata, datafile = "path/to/filename.txt", 
              codefile = "path/to/filename.sas",  package="SAS")
```

Here are links to more details on data 
[import](http://www.statmethods.net/input/importingdata.html)
and [export](http://www.statmethods.net/input/exportingdata.html). 

## Saving the workspace

- You can choose to **save all objects** currently in the workspace
(variables, functions, etc.) into a file e.g. `filename.rda`.

- The file `filename.rda` can be loaded next time you work with R.

- You can also save a single object or a subset of specified
objects currently in the workspace.

```{r eval = FALSE}
# save the workspace to file 
save.image(file = "path/to/filename.rda")

# save specific objects to a file
save(object_list, file = "path/to/filename.rda")

# save just a single object
saveRDS(object, file = "path/to/filename.rds")
```

- Saved objects/workspace can be loaded back in a new R session.

```{r eval = FALSE}
# load a workspace into the current session
load("path/to/filename.rda")

# read just the previously saved 1 object
object <- readRDS("path/to/filename.rds")
```


## Exercise 1

- Download "Lec2_ex.Rmd" file from the Lectures tab on class website.

- Open the file in RStudio.

- Do Exercise 1.




## `tidyverse`

<div class="left", style="width: 65%;"> 
  
  From https://www.tidyverse.org/:
  
  > The `tidyverse` is an opinionated collection of R packages designed for data 
science. All packages share an underlying design philosophy, grammar, and data 
structures. 

The system is intended to make data scientists more productive. To use
`tidyverse` do the following:
  
  ```{r, eval = FALSE}
# Install the package
install.packages("tidyverse")
# Load it into memory
library("tidyverse")
```
</div>
  
  <div class="right", style="width: 35%;"> 
  <img src="./Lecture1-figure/tidyverse.png", height="600"></img> 
</div>
  
## Data science workflow




##




## Identifiers 

**Google Convention:** 
  
  * No underscores ( _ ) or hyphens ( - ) in identifiers. 
* **Variable names** all with lower case letters; words separated with dots 
('variable.name'), but 'variableName' is also accepte
* **Function names** have initial capital letters and no dots 
('FunctionName'). Function names should be verbs. Constants are named like 
functions but with an initial k.

```{r, eval = FALSE}
# Good
avg.clicks            # variable name
CalculateAvgClicks    # function name
# Bad
avg_Clicks                                 # variable name
calculate_avg_clicks , calculateAvgClicks  # function name
```

## Identifiers 

**Hadley Convention:**
  
  - Variable and function names should be lowercase. 
- Use an underscore (_) to separate words within a name. 
- Generally, variable names should be nouns and function names should be verbs. 
- Use names that are concise and meaningful. 

```{r eval = FALSE}
# Good
day_one
day_1

# Bad
first_day_of_the_month
DayOne
dayone
djm1
```


## Spacing

- Place spaces around all infix operators (=, +, -, <-, etc.). 

- Always put a space after a comma, and never before (just like in regular English).

- Place a space before left parentheses, except in a function call.

```{r eval = FALSE}
# Good
average <- mean(feet / 12 + inches, na.rm = TRUE)
if (debug) do(x)
plot(x, y)
if (debug) do(x)
diamonds[5, ]

# Bad
average<-mean(feet/12+inches,na.rm=TRUE)
if(debug)do(x)
plot (x, y)
if ( debug ) do(x)  # No spaces around debug
x[1,]               # Needs a space after the comma
x[1 ,]              # Space goes after comma not before
```





```{r}
sessionInfo()
```

