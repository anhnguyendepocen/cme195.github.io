<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <title>Lecture 2: Syntax, control flow, functions</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="libs/reveal.js-3.3.0.1/css/reveal.css"/>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="libs/reveal.js-3.3.0.1/css/theme/simple.css" id="theme">


  <!-- some tweaks to reveal css -->
  <style type="text/css">
    .reveal h1 { font-size: 2.0em; }
    .reveal h2 { font-size: 1.5em;  }
    .reveal h3 { font-size: 1.25em;	}
    .reveal h4 { font-size: 1em;	}

    .reveal .slides>section,
    .reveal .slides>section>section {
      padding: 0px 0px;
    }



    .reveal table {
      border-width: 1px;
      border-spacing: 2px;
      border-style: dotted;
      border-color: gray;
      border-collapse: collapse;
      font-size: 0.7em;
    }

    .reveal table th {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      font-weight: bold;
      border-style: dotted;
      border-color: gray;
    }

    .reveal table td {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      border-style: dotted;
      border-color: gray;
    }


  </style>

    <style type="text/css">code{white-space: pre;}</style>

    <link rel="stylesheet" href="class.css"/>

<!-- Printing and PDF exports -->
<script id="paper-css" type="application/dynamic-css">

/* Default Print Stylesheet Template
   by Rob Glazebrook of CSSnewbie.com
   Last Updated: June 4, 2008

   Feel free (nay, compelled) to edit, append, and
   manipulate this file as you see fit. */


@media print {

	/* SECTION 1: Set default width, margin, float, and
	   background. This prevents elements from extending
	   beyond the edge of the printed page, and prevents
	   unnecessary background images from printing */
	html {
		background: #fff;
		width: auto;
		height: auto;
		overflow: visible;
	}
	body {
		background: #fff;
		font-size: 20pt;
		width: auto;
		height: auto;
		border: 0;
		margin: 0 5%;
		padding: 0;
		overflow: visible;
		float: none !important;
	}

	/* SECTION 2: Remove any elements not needed in print.
	   This would include navigation, ads, sidebars, etc. */
	.nestedarrow,
	.controls,
	.fork-reveal,
	.share-reveal,
	.state-background,
	.reveal .progress,
	.reveal .backgrounds {
		display: none !important;
	}

	/* SECTION 3: Set body font face, size, and color.
	   Consider using a serif font for readability. */
	body, p, td, li, div {
		font-size: 20pt!important;
		font-family: Georgia, "Times New Roman", Times, serif !important;
		color: #000;
	}

	/* SECTION 4: Set heading font face, sizes, and color.
	   Differentiate your headings from your body text.
	   Perhaps use a large sans-serif for distinction. */
	h1,h2,h3,h4,h5,h6 {
		color: #000!important;
		height: auto;
		line-height: normal;
		font-family: Georgia, "Times New Roman", Times, serif !important;
		text-shadow: 0 0 0 #000 !important;
		text-align: left;
		letter-spacing: normal;
	}
	/* Need to reduce the size of the fonts for printing */
	h1 { font-size: 28pt !important;  }
	h2 { font-size: 24pt !important; }
	h3 { font-size: 22pt !important; }
	h4 { font-size: 22pt !important; font-variant: small-caps; }
	h5 { font-size: 21pt !important; }
	h6 { font-size: 20pt !important; font-style: italic; }

	/* SECTION 5: Make hyperlinks more usable.
	   Ensure links are underlined, and consider appending
	   the URL to the end of the link for usability. */
	a:link,
	a:visited {
		color: #000 !important;
		font-weight: bold;
		text-decoration: underline;
	}
	/*
	.reveal a:link:after,
	.reveal a:visited:after {
		content: " (" attr(href) ") ";
		color: #222 !important;
		font-size: 90%;
	}
	*/


	/* SECTION 6: more reveal.js specific additions by @skypanther */
	ul, ol, div, p {
		visibility: visible;
		position: static;
		width: auto;
		height: auto;
		display: block;
		overflow: visible;
		margin: 0;
		text-align: left !important;
	}
	.reveal pre,
	.reveal table {
		margin-left: 0;
		margin-right: 0;
	}
	.reveal pre code {
		padding: 20px;
		border: 1px solid #ddd;
	}
	.reveal blockquote {
		margin: 20px 0;
	}
	.reveal .slides {
		position: static !important;
		width: auto !important;
		height: auto !important;

		left: 0 !important;
		top: 0 !important;
		margin-left: 0 !important;
		margin-top: 0 !important;
		padding: 0 !important;
		zoom: 1 !important;

		overflow: visible !important;
		display: block !important;

		text-align: left !important;
		-webkit-perspective: none;
		   -moz-perspective: none;
		    -ms-perspective: none;
		        perspective: none;

		-webkit-perspective-origin: 50% 50%;
		   -moz-perspective-origin: 50% 50%;
		    -ms-perspective-origin: 50% 50%;
		        perspective-origin: 50% 50%;
	}
	.reveal .slides section {
		visibility: visible !important;
		position: static !important;
		width: auto !important;
		height: auto !important;
		display: block !important;
		overflow: visible !important;

		left: 0 !important;
		top: 0 !important;
		margin-left: 0 !important;
		margin-top: 0 !important;
		padding: 60px 20px !important;
		z-index: auto !important;

		opacity: 1 !important;

		page-break-after: always !important;

		-webkit-transform-style: flat !important;
		   -moz-transform-style: flat !important;
		    -ms-transform-style: flat !important;
		        transform-style: flat !important;

		-webkit-transform: none !important;
		   -moz-transform: none !important;
		    -ms-transform: none !important;
		        transform: none !important;

		-webkit-transition: none !important;
		   -moz-transition: none !important;
		    -ms-transition: none !important;
		        transition: none !important;
	}
	.reveal .slides section.stack {
		padding: 0 !important;
	}
	.reveal section:last-of-type {
		page-break-after: avoid !important;
	}
	.reveal section .fragment {
		opacity: 1 !important;
		visibility: visible !important;

		-webkit-transform: none !important;
		   -moz-transform: none !important;
		    -ms-transform: none !important;
		        transform: none !important;
	}
	.reveal section img {
		display: block;
		margin: 15px 0px;
		background: rgba(255,255,255,1);
		border: 1px solid #666;
		box-shadow: none;
	}

	.reveal section small {
		font-size: 0.8em;
	}

}  
</script>


<script id="pdf-css" type="application/dynamic-css">
    
/**
 * This stylesheet is used to print reveal.js
 * presentations to PDF.
 *
 * https://github.com/hakimel/reveal.js#pdf-export
 */

* {
	-webkit-print-color-adjust: exact;
}

body {
	margin: 0 auto !important;
	border: 0;
	padding: 0;
	float: none !important;
	overflow: visible;
}

html {
	width: 100%;
	height: 100%;
	overflow: visible;
}

/* Remove any elements not needed in print. */
.nestedarrow,
.reveal .controls,
.reveal .progress,
.reveal .playback,
.reveal.overview,
.fork-reveal,
.share-reveal,
.state-background {
	display: none !important;
}

h1, h2, h3, h4, h5, h6 {
	text-shadow: 0 0 0 #000 !important;
}

.reveal pre code {
	overflow: hidden !important;
	font-family: Courier, 'Courier New', monospace !important;
}

ul, ol, div, p {
	visibility: visible;
	position: static;
	width: auto;
	height: auto;
	display: block;
	overflow: visible;
	margin: auto;
}
.reveal {
	width: auto !important;
	height: auto !important;
	overflow: hidden !important;
}
.reveal .slides {
	position: static;
	width: 100%;
	height: auto;

	left: auto;
	top: auto;
	margin: 0 !important;
	padding: 0 !important;

	overflow: visible;
	display: block;

	-webkit-perspective: none;
	   -moz-perspective: none;
	    -ms-perspective: none;
	        perspective: none;

	-webkit-perspective-origin: 50% 50%; /* there isn't a none/auto value but 50-50 is the default */
	   -moz-perspective-origin: 50% 50%;
	    -ms-perspective-origin: 50% 50%;
	        perspective-origin: 50% 50%;
}

.reveal .slides section {
	page-break-after: always !important;

	visibility: visible !important;
	position: relative !important;
	display: block !important;
	position: relative !important;

	margin: 0 !important;
	padding: 0 !important;
	box-sizing: border-box !important;
	min-height: 1px;

	opacity: 1 !important;

	-webkit-transform-style: flat !important;
	   -moz-transform-style: flat !important;
	    -ms-transform-style: flat !important;
	        transform-style: flat !important;

	-webkit-transform: none !important;
	   -moz-transform: none !important;
	    -ms-transform: none !important;
	        transform: none !important;
}

.reveal section.stack {
	margin: 0 !important;
	padding: 0 !important;
	page-break-after: avoid !important;
	height: auto !important;
	min-height: auto !important;
}

.reveal img {
	box-shadow: none;
}

.reveal .roll {
	overflow: visible;
	line-height: 1em;
}

/* Slide backgrounds are placed inside of their slide when exporting to PDF */
.reveal section .slide-background {
	display: block !important;
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	z-index: -1;
}

/* All elements should be above the slide-background */
.reveal section>* {
	position: relative;
	z-index: 1;
}

/* Display slide speaker notes when 'showNotes' is enabled */
.reveal .speaker-notes-pdf {
	display: block;
	width: 100%;
	max-height: none;
	left: auto;
	top: auto;
	z-index: 100;
}

/* Display slide numbers when 'slideNumber' is enabled */
.reveal .slide-number-pdf {
	display: block;
	position: absolute;
	font-size: 14px;
}

</script>


<script>
var style = document.createElement( 'style' );
style.type = 'text/css';
var style_script_id = window.location.search.match( /print-pdf/gi ) ? 'pdf-css' : 'paper-css';
var style_script = document.getElementById(style_script_id).text;
style.innerHTML = style_script;
document.getElementsByTagName('head')[0].appendChild(style);
</script>

</head>
<body>
  <div class="reveal">
    <div class="slides">

<section>
    <h1 class="title">Lecture 2: Syntax, control flow, functions</h1>
    <h3 class="date">October 5, 2017</h3>
</section>

<section id="contents" class="slide level2">
<h2>Contents</h2>
<ul>
<li>RStudio</li>
<li>Syntax</li>
<li>File input/output</li>
<li>Control flow statements</li>
<li>Functions</li>
</ul>
</section>
<section><section id="rstudio" class="titleslide slide level1"><h1>RStudio</h1></section><section id="rstudio-window" class="slide level2">
<h2>RStudio window</h2>
<div style="float: center; height: 600px">
<p><img src="Lecture2-figure/RStudio_window.png", height="600", width="950"></img></p>
</div>
</section><section id="rstudio-preferences" class="slide level2">
<h2>RStudio preferences</h2>
<div style="float: center; height: 600px">
<p><img src="Lecture2-figure/RStudio_preferences.png", height="600", width="950"></img></p>
</div>
</section><section id="rstudio-layout" class="slide level2">
<h2>RStudio layout</h2>
<div style="float: center; height: 600px">
<p><img src="Lecture2-figure/RStudio_layout.png", height="600", width="950"></img></p>
</div>
</section><section id="rstudio-apprearance" class="slide level2">
<h2>RStudio apprearance</h2>
<div style="float: center; height: 550px">
<p><img src="Lecture2-figure/RStudio_appearances.png", height="500", width="900"></img></p>
</div>
<p>More on RStudio cuztomization can be found <a href="https://support.rstudio.com/hc/en-us/articles/200549016-Customizing-RStudio">here</a></p>
</section><section id="r-document-types" class="slide level2">
<h2>R document types</h2>
<div style="float: center; height: 600px">
<p><img src="Lecture2-figure/RStudio_documents.png", height="600", width="950"></img></p>
</div>
</section><section id="r-document-types-1" class="slide level2">
<h2>R document types</h2>
<ul>
<li><p><a href="https://cran.r-project.org/doc/contrib/Lemon-kickstart/kr_scrpt.html">R Script</a> <strong>a text file</strong> containing R commands stored together.</p></li>
<li><p><a href="http://rmarkdown.rstudio.com/lesson-1.html">R Markdown</a> files can generate high quality reports contatining notes, code and code outputs. <strong>Python and bash code </strong> can also be executed.</p></li>
<li><p><a href="http://rmarkdown.rstudio.com/r_notebooks.html">R Notebook</a> is an R Markdown document with <strong>chunks that can be executed independently and interactively</strong>, with output visible immediately beneath the input.</p></li>
<li><p><a href="https://support.rstudio.com/hc/en-us/articles/200486468-Authoring-R-Presentations">R presentation</a> let’s you author <strong>slides</strong> that make use of R code and LaTeX equations as <strong>straightforward</strong> as possible.</p></li>
<li><p><a href="https://support.rstudio.com/hc/en-us/articles/200552056-Using-Sweave-and-knitr">R Sweave</a> enables the embedding of <strong>R code within LaTeX documents</strong>.</p></li>
</ul>
</section><section id="working-with-code-chunks" class="slide level2">
<h2>Working with code chunks</h2>
<p><br/></p>
<p>Keyboard shortcuts:</p>
<ul>
<li><p>Insert a new code chunk: <strong>Ctrl + Alt + I</strong> (Mac OS: <strong>Cnd + Option + I</strong>)</p></li>
<li><p>Run the current chunk: <strong>Ctrl + Shift + Enter</strong> (Mac OS: <strong>Cmd + Shift + Enter</strong>)</p></li>
<li><p>Run the current statement (the line where the cursor is) <strong>Ctrl + Enter</strong> (Mac OS: <strong>Cmd + Enter</strong>)</p></li>
</ul>
</section></section>
<section><section id="syntax" class="titleslide slide level1"><h1>Syntax</h1></section><section id="style-guide" class="slide level2">
<h2>Style Guide</h2>
<ul>
<li>There are two main style conventions used in R:
<ul>
<li><a href="http://adv-r.had.co.nz/Style.html">Hadley Wickam style</a></li>
<li><a href="https://google.github.io/styleguide/Rguide.xml">Google R style</a></li>
</ul></li>
<li>You can use either of the two style guides or create your own customized style.</li>
<li>But you should stay <strong>consistent</strong>, e.g. if you choose to assign variables with <code>&lt;-</code>, stick to it and don’t use <code>=</code>.</li>
</ul>
</section><section id="identifiers" class="slide level2">
<h2>Identifiers</h2>
<p><strong>Google Convention:</strong></p>
<ul>
<li>No underscores ( _ ) or hyphens ( - ) in identifiers.</li>
<li><strong>Variable names</strong> all with lower case letters; words separated with dots (‘variable.name’), but ‘variableName’ is also accepte</li>
<li><strong>Function names</strong> have initial capital letters and no dots (‘FunctionName’). Function names should be verbs. Constants are named like functions but with an initial k.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Good</span>
avg.clicks            <span class="co"># variable name</span>
CalculateAvgClicks    <span class="co"># function name</span>
<span class="co"># Bad</span>
avg_Clicks                                 <span class="co"># variable name</span>
calculate_avg_clicks , calculateAvgClicks  <span class="co"># function name</span></code></pre></div>
</section><section id="identifiers-1" class="slide level2">
<h2>Identifiers</h2>
<p><strong>Hadley Convention:</strong></p>
<ul>
<li>Variable and function names should be lowercase.</li>
<li>Use an underscore (_) to separate words within a name.</li>
<li>Generally, variable names should be nouns and function names should be verbs.</li>
<li>Use names that are concise and meaningful.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Good</span>
day_one
day_<span class="dv">1</span>

<span class="co"># Bad</span>
first_day_of_the_month
DayOne
dayone
djm1</code></pre></div>
</section><section id="spacing" class="slide level2">
<h2>Spacing</h2>
<ul>
<li><p>Place spaces around all infix operators (=, +, -, &lt;-, etc.).</p></li>
<li><p>Always put a space after a comma, and never before (just like in regular English).</p></li>
<li><p>Place a space before left parentheses, except in a function call.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Good</span>
average &lt;-<span class="st"> </span><span class="kw">mean</span>(feet <span class="op">/</span><span class="st"> </span><span class="dv">12</span> <span class="op">+</span><span class="st"> </span>inches, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)
<span class="cf">if</span> (debug) <span class="kw">do</span>(x)
<span class="kw">plot</span>(x, y)
<span class="cf">if</span> (debug) <span class="kw">do</span>(x)
diamonds[<span class="dv">5</span>, ]

<span class="co"># Bad</span>
average&lt;-<span class="kw">mean</span>(feet<span class="op">/</span><span class="dv">12</span><span class="op">+</span>inches,<span class="dt">na.rm=</span><span class="ot">TRUE</span>)
<span class="cf">if</span>(debug)<span class="kw">do</span>(x)
<span class="kw">plot</span> (x, y)
<span class="cf">if</span> ( debug ) <span class="kw">do</span>(x)  <span class="co"># No spaces around debug</span>
x[<span class="dv">1</span>,]               <span class="co"># Needs a space after the comma</span>
x[<span class="dv">1</span> ,]              <span class="co"># Space goes after comma not before</span></code></pre></div>
</section><section id="code-documentation" class="slide level2">
<h2>Code Documentation</h2>
<div class="left" ,="" style="width: 50%">
<ul>
<li><p>Comment your code! They will be helpful when you read your code a month after you wrote it.</p></li>
<li><p>In R each line of a comment should begin with a comment symbol “<code>#</code>”.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Function returns the answer to life, </span>
<span class="co"># the universe and everything else</span>
get_answer &lt;-<span class="st"> </span><span class="cf">function</span>(){
  <span class="kw">return</span>(<span class="dv">42</span>)
}</code></pre></div>
</div>
<div class="right" ,="" style="width: 50%">
<ul>
<li>Comments are not subtitles, i.e. don’t repeat the code in the comments.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Loop through all bananas in the bunch</span>
<span class="cf">for</span>(banana <span class="cf">in</span> bunch) {
  <span class="co"># make the monkey eat one banana</span>
  <span class="kw">MonkeyEat</span>(b)  
}</code></pre></div>
<ul>
<li>Use commented lines of - and = to break up your file into easily readable chunks.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load data ---------------------------</span>
<span class="co"># Plot data ---------------------------</span></code></pre></div>
</div>
</section><section id="curly-braces" class="slide level2">
<h2>Curly braces</h2>
<div class="left" ,="" style="width: 40%">
<ul>
<li>An opening curly brace “<code>{</code>” should never go on its own line and should always be followed by a new line.</li>
<li>A closing curly “<code>}</code>” brace should always go on its own line, unless it’s followed by else.</li>
<li>Always indent the code inside curly braces.</li>
<li>It’s ok to leave very short statements on the same line</li>
</ul>
</div>
<div class="right" ,="" style="width: 60%">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Good</span>
<span class="cf">if</span> (y <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span>debug) {
  <span class="kw">message</span>(<span class="st">&quot;Y is negative&quot;</span>)
}
<span class="cf">if</span> (y <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) {
  <span class="kw">log</span>(x)
} <span class="cf">else</span> {
  y <span class="op">^</span><span class="st"> </span>x
}

<span class="co"># Bad</span>
<span class="cf">if</span> (y <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span>debug)
<span class="kw">message</span>(<span class="st">&quot;Y is negative&quot;</span>)

<span class="cf">if</span> (y <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) {
  <span class="kw">log</span>(x)
} 
<span class="cf">else</span> {
  y <span class="op">^</span><span class="st"> </span>x
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span> (y <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span>debug) <span class="kw">message</span>(<span class="st">&quot;Y is negative&quot;</span>)</code></pre></div>
</div>
</section></section>
<section><section id="file-inputoutput" class="titleslide slide level1"><h1>File Input/Output</h1></section><section id="working-directory" class="slide level2">
<h2>Working Directory</h2>
<div class="left" ,="" style="width: 50%">
<ul>
<li><p>The <strong>current working directory</strong> (cmd) is the location which R is currently pointing to</p></li>
<li><p>Whenever you try to read or save a file without specifying the path explicitly, the cmd will be used by default.</p></li>
<li><p>When are executing code from an R markdown/notebook code chunk, the cmd is <strong>the location of the document</strong>.</p></li>
</ul>
</div>
<div class="right" ,="" style="width: 50%">
<ul>
<li>To see the current working directory use <code>getwd()</code>:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getwd</span>()   <span class="co"># with no arguments</span></code></pre></div>
<pre><code>## [1] &quot;/Users/lanhuongnguyen/MEGA/Teaching/cme195_intro_to_R/cme195.github.io/assets/lectures&quot;</code></pre>
<ul>
<li>To change the working directory use <code>setwd(path_name)</code> with a specified path as na argument:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">setwd</span>(<span class="st">&quot;path/to/directory&quot;</span>)</code></pre></div>
</div>
</section><section id="paths-and-directory-names" class="slide level2">
<h2>Paths and directory names</h2>
<ul>
<li><p>In Windows, a directory usually has an address of the following form: <code>C:\Users\lan\folder</code>.</p></li>
<li><p>R inherits its file and folder naming conventions from unix, and instead uses forward slashes instead of backslashes, e.g. <code>C:/Users/lan/folder/</code></p></li>
<li><p>The Mac OSX already uses the unix standards, the address is usually of the form: <code>/home/lan/folder/</code>.</p></li>
<li><p>So, when working in R use the forward slashes “/”.</p></li>
<li><p>Actually for Windows, you can use either “<code>C:/Path/To/A/File</code>” or “<code>C:\\Path\\To\\A\\File</code>”.</p></li>
</ul>
</section><section id="paths-and-directory-names-1" class="slide level2">
<h2>Paths and directory names</h2>
<ul>
<li><p>R uses forward slashes for the directories, because backslashes serve a different purpose. They are used as escape characters to isolate special characters and stop them from being immediately interpreted.</p></li>
<li><p>To avoid problems, directory names should NOT contain spaces and special characters.</p></li>
<li><p>Use a “<code>Tab</code>” for autocompletion to find file paths more easily.</p></li>
</ul>
</section><section id="data-import" class="slide level2">
<h2>Data import</h2>
<ul>
<li><p><strong>Text Files in a table format</strong> can be read and saved to a selected variable using a <code>read.table()</code> function. Use <code>?read.table</code> to learn more about the function.</p></li>
<li><p>A common text file format is a <strong>comma delimited text file</strong>, <code>.csv</code>. These files use a comma as column separators, e.g:</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Year,Student,Major
<span class="dv">2009</span>, John Doe,Statistics
<span class="dv">2009</span>, Bart Simpson, Mathematics I</code></pre></div>
<ul>
<li>To read these files use the following command:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mydata &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;path/to/filename.csv&quot;</span>, <span class="dt">header=</span><span class="ot">TRUE</span>,  <span class="dt">sep =</span> <span class="st">&quot;,&quot;</span>)
<span class="co"># read.csv() has covenient argument defaults for &#39;.csv&#39; files</span>
mydata &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;path/to/filename.csv&quot;</span>)</code></pre></div>
<ul>
<li>Optionally, use <code>row.names</code> or <code>col.names</code> arguments to set the row and column names.</li>
</ul>
</section><section id="data-import-1" class="slide level2">
<h2>Data import</h2>
<ul>
<li><strong>Excel files</strong>. To read the excel files you need to first install a package “xlsx”. Simply run <code>install.packages(&quot;xlsx&quot;)</code>.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># first row contains variable names</span>
<span class="kw">library</span>(xlsx)
<span class="co"># read the 1st worksheet</span>
mydata &lt;-<span class="st"> </span><span class="kw">read.xlsx</span>(<span class="st">&quot;/path/to/filename.xlsx&quot;</span>, <span class="dv">1</span>)  

<span class="co"># read in the worksheet named mysheet</span>
mydata &lt;-<span class="st"> </span><span class="kw">read.xlsx</span>(<span class="st">&quot;/path/to/filename.xlsx&quot;</span>, <span class="dt">sheetName =</span> <span class="st">&quot;mysheet&quot;</span>)</code></pre></div>
<ul>
<li><strong>SAS files</strong>. You need to install the <code>Hmisc</code> or <code>foreign</code> packages first.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># First, save your SAS dataset in trasport (xport) format</span>
libname out xport <span class="st">&#39;path/to/filename.xpt&#39;</span>;
data out.mydata;
set sasuser.mydata;
run;

<span class="co"># Then, in R </span>
<span class="kw">library</span>(Hmisc)
mydata &lt;-<span class="st"> </span><span class="kw">sasxport.get</span>(<span class="st">&quot;path/to/filename.xpt&quot;</span>)
<span class="co"># character variables are converted to R factors</span>
<span class="co"># or</span>
<span class="kw">library</span>(foreign)
mydata &lt;-<span class="st"> </span><span class="kw">read.xport</span>(<span class="st">&quot;path/to/filename.xpt&quot;</span>)</code></pre></div>
</section><section id="data-export" class="slide level2">
<h2>Data export</h2>
<ul>
<li><strong>Text files</strong>:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">write.table</span>(mydata, <span class="st">&quot;path/to/filename.txt&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>)  <span class="co"># tab-delimited</span>
<span class="kw">write.table</span>(mydata, <span class="st">&quot;path/to/filename.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;,&quot;</span>)   <span class="co"># comma-delimited</span>
<span class="kw">write.csv</span>(mydata, <span class="st">&quot;path/to/filename.csv&quot;</span>)              <span class="co"># comma-delimited</span></code></pre></div>
<ul>
<li><strong>Excel spreadsheet</strong>:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(xlsx)
<span class="kw">write.xlsx</span>(mydata, <span class="st">&quot;path/to/filename.xlsx&quot;</span>)</code></pre></div>
<ul>
<li><strong>SAS</strong> files:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># write out text datafile and an SAS program to read it</span>
<span class="kw">library</span>(foreign)
<span class="kw">write.foreign</span>(mydata, <span class="dt">datafile =</span> <span class="st">&quot;path/to/filename.txt&quot;</span>, 
              <span class="dt">codefile =</span> <span class="st">&quot;path/to/filename.sas&quot;</span>,  <span class="dt">package=</span><span class="st">&quot;SAS&quot;</span>)</code></pre></div>
<p>Here are links to more details on data <a href="http://www.statmethods.net/input/importingdata.html">import</a> and <a href="http://www.statmethods.net/input/exportingdata.html">export</a>.</p>
</section><section id="saving-the-workspace" class="slide level2">
<h2>Saving the workspace</h2>
<ul>
<li><p>You can choose to <strong>save all objects</strong> currently in the workspace (variables, functions, etc.) into a file e.g. <code>filename.rda</code>.</p></li>
<li><p>The file <code>filename.rda</code> can be loaded next time you work with R.</p></li>
<li><p>You can also save a single object or a subset of specified objects currently in the workspace.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># save the workspace to file </span>
<span class="kw">save.image</span>(<span class="dt">file =</span> <span class="st">&quot;path/to/filename.rda&quot;</span>)

<span class="co"># save specific objects to a file</span>
<span class="kw">save</span>(object_list, <span class="dt">file =</span> <span class="st">&quot;path/to/filename.rda&quot;</span>)

<span class="co"># save just a single object</span>
<span class="kw">saveRDS</span>(object, <span class="dt">file =</span> <span class="st">&quot;path/to/filename.rds&quot;</span>)</code></pre></div>
<ul>
<li>Saved objects/workspace can be loaded back in a new R session.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load a workspace into the current session</span>
<span class="kw">load</span>(<span class="st">&quot;path/to/filename.rda&quot;</span>)

<span class="co"># read just the previously saved 1 object</span>
object &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&quot;path/to/filename.rds&quot;</span>)</code></pre></div>
</section><section id="exercise-1" class="slide level2">
<h2>Exercise 1</h2>
<ul>
<li><p>Download “Lec2_ex.Rmd” file from the Lectures tab on class website.</p></li>
<li><p>Open the file in RStudio.</p></li>
<li><p>Do Exercise 1.</p></li>
</ul>
</section></section>
<section><section id="control-flow" class="titleslide slide level1"><h1>Control flow</h1></section><section id="booleanslogicals" class="slide level2">
<h2>Booleans/logicals</h2>
<div class="left" ,="" style="width: 50%">
<p><strong>Booleans</strong> are logical data types (TRUE/FALSE) associated with conditional statements, which allow different actions and change control flow.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># equal &quot;==&quot;&quot;</span>
<span class="dv">5</span> <span class="op">==</span><span class="st"> </span><span class="dv">5</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># not equal: &quot;!=&quot;&quot; </span>
<span class="dv">5</span> <span class="op">!=</span><span class="st"> </span><span class="dv">5</span> </code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># greater than: &quot;&gt;&quot;&quot;</span>
<span class="dv">5</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">4</span> </code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># greater than or equal: &quot;&gt;=&quot;&quot; (# similarly &lt; and &lt;=)</span>
<span class="dv">5</span> <span class="op">&gt;=</span><span class="st"> </span><span class="dv">5</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div class="right" ,="" style="width: 50%">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># You can combine multiple boolean expressions</span>
<span class="ot">TRUE</span> <span class="op">&amp;</span><span class="st"> </span><span class="ot">TRUE</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="ot">TRUE</span> <span class="op">&amp;</span><span class="st"> </span><span class="ot">FALSE</span> </code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="ot">TRUE</span> <span class="op">|</span><span class="st"> </span><span class="ot">FALSE</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">!</span>(<span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</div>
</section><section id="booleanslogicals-1" class="slide level2">
<h2>Booleans/logicals</h2>
<p>In R if you combine 2 vectors of booleans, by each element then use <code>&amp;</code>. Rember the <strong>recycling property</strong> for vectors.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>) <span class="op">&amp;</span><span class="st"> </span><span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## [1] FALSE  TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dv">5</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">4</span>, <span class="dv">7</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="dv">1</span><span class="op">&lt;</span><span class="st"> </span><span class="dv">2</span>) <span class="op">|</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">5</span><span class="op">==</span><span class="dv">5</span>, <span class="dv">6</span><span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>, <span class="op">!</span><span class="ot">FALSE</span>)</code></pre></div>
<pre><code>## [1] TRUE TRUE TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>) <span class="op">&amp;</span><span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>)  <span class="co"># recycling</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE FALSE</code></pre>
</section><section id="booleanslogicals-2" class="slide level2">
<h2>Booleans/logicals</h2>
<p>If we use double operators <code>&amp;&amp;</code> or <code>||</code> is used only the first elements are compared:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dv">5</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">4</span>, <span class="dv">7</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="dv">1</span><span class="op">&lt;</span><span class="st"> </span><span class="dv">2</span>) <span class="op">||</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">5</span><span class="op">==</span><span class="dv">5</span>, <span class="dv">6</span><span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>, <span class="op">!</span><span class="ot">FALSE</span>)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</section><section id="booleanslogicals-3" class="slide level2">
<h2>Booleans/logicals</h2>
<ul>
<li>Another possibility to combine booleans is to use <code>all()</code> or <code>any()</code> functions:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">all</span>(<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>))</code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">any</span>(<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>))</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">all</span>(<span class="kw">c</span>(<span class="dv">5</span> <span class="op">&gt;</span><span class="st"> </span><span class="op">-</span><span class="dv">1</span>, <span class="dv">3</span> <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>))</code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">any</span>(<span class="kw">c</span>(<span class="dv">5</span> <span class="op">&gt;</span><span class="st"> </span><span class="op">-</span><span class="dv">1</span>, <span class="dv">3</span> <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>))</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</section><section id="control-statements" class="slide level2">
<h2>Control statements</h2>
<ul>
<li><p><strong>Control flow</strong> is the order in which individual statements, instructions or function calls of a program are evaluated.</p></li>
<li><p>Control statements allow you to do more complicated tasks.</p></li>
<li>Their execution results in a choice between which of two or more paths should be followed.
<ul>
<li><code>If</code> / <code>else</code></li>
<li><code>For</code></li>
<li><code>While</code></li>
</ul></li>
</ul>
</section><section id="if-statements" class="slide level2">
<h2>If statements</h2>
<div class="left" ,="" style="width: 50%">
<ul>
<li><p>Decide on whether a block of code should be executed based on the associated boolean expression.</p></li>
<li><p><strong>Syntax</strong>. The if statements are followed by a boolean expression wrapped in parenthesis. The conditional block of code is inside curly braces <code>{}</code>.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span> (traffic_light <span class="op">==</span><span class="st"> &quot;green&quot;</span>) {
  <span class="kw">print</span>(<span class="st">&quot;Go.&quot;</span>)
}</code></pre></div>
</div>
<div class="right" ,="" style="width: 50%">
<ul>
<li>‘if-else’ statements let you introduce more options</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span> (traffic_light <span class="op">==</span><span class="st"> &quot;green&quot;</span>) {
   <span class="kw">print</span>(<span class="st">&quot;Go.&quot;</span>)
} <span class="cf">else</span> {
   <span class="kw">print</span>(<span class="st">&quot;Stay.&quot;</span>)
}</code></pre></div>
<ul>
<li>You can also use <code>else if()</code></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span> (traffic_light <span class="op">==</span><span class="st"> &quot;green&quot;</span>) {
   <span class="kw">print</span>(<span class="st">&quot;Go.&quot;</span>)
} <span class="cf">else</span> <span class="cf">if</span> (traffic_light <span class="op">==</span><span class="st"> &quot;yellow&quot;</span>) {
  <span class="kw">print</span>(<span class="st">&quot;Get ready.&quot;</span>)
} <span class="cf">else</span> {
   <span class="kw">print</span>(<span class="st">&quot;Stay.&quot;</span>)
}</code></pre></div>
</div>
</section><section id="for-loops" class="slide level2">
<h2>For loops</h2>
<p></br></p>
<ul>
<li>A for loop is a statement which <strong>repeats the execution a block of code</strong> a given number of iterations.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>){
  <span class="kw">print</span>(i<span class="op">^</span><span class="dv">2</span>)
}</code></pre></div>
<pre><code>## [1] 1
## [1] 4
## [1] 9
## [1] 16
## [1] 25</code></pre>
</section><section id="while-loops" class="slide level2">
<h2>While loops</h2>
<p></br></p>
<ul>
<li>Similar to for loops, but repeat the execution as long <strong>as the boolean condition supplied is TRUE</strong>.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">i =<span class="st"> </span><span class="dv">1</span>
<span class="cf">while</span>(i <span class="op">&lt;=</span><span class="st"> </span><span class="dv">5</span>) {
  <span class="kw">cat</span>(<span class="st">&quot;i =&quot;</span>, i, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)
  i =<span class="st"> </span>i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>
}</code></pre></div>
<pre><code>## i = 1 
## i = 2 
## i = 3 
## i = 4 
## i = 5</code></pre>
</section><section id="next" class="slide level2">
<h2>Next</h2>
<div class="left" ,="" style="width: 50%">
<ul>
<li><code>next</code> halts the processing of the current iteration and advances the looping index.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>) {
  <span class="cf">if</span> (i <span class="op">&lt;=</span><span class="st"> </span><span class="dv">5</span>) {
    <span class="kw">print</span>(<span class="st">&quot;skip&quot;</span>)
    <span class="cf">next</span>
  }
  <span class="kw">cat</span>(i, <span class="st">&quot;is greater than 5.</span><span class="ch">\n</span><span class="st">&quot;</span>)
}</code></pre></div>
<pre><code>## [1] &quot;skip&quot;
## [1] &quot;skip&quot;
## [1] &quot;skip&quot;
## [1] &quot;skip&quot;
## [1] &quot;skip&quot;
## 6 is greater than 5.
## 7 is greater than 5.
## 8 is greater than 5.
## 9 is greater than 5.
## 10 is greater than 5.</code></pre>
</div>
<div class="right" ,="" style="width: 50%">
<ul>
<li><code>next</code> applies only to the innermost of nested loops.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>) {
  <span class="kw">cat</span>(<span class="st">&quot;Outer-loop i: &quot;</span>, i, <span class="st">&quot;.</span><span class="ch">\n</span><span class="st">&quot;</span>)
  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>) {
    <span class="cf">if</span>(j <span class="op">&gt;</span><span class="st"> </span>i) {
      <span class="kw">print</span>(<span class="st">&quot;skip&quot;</span>)
      <span class="cf">next</span>
    }
    <span class="kw">cat</span>(<span class="st">&quot;Inner-loop j:&quot;</span>, j, <span class="st">&quot;.</span><span class="ch">\n</span><span class="st">&quot;</span>)
  }
}</code></pre></div>
<pre><code>## Outer-loop i:  1 .
## Inner-loop j: 1 .
## [1] &quot;skip&quot;
## [1] &quot;skip&quot;
## [1] &quot;skip&quot;
## Outer-loop i:  2 .
## Inner-loop j: 1 .
## Inner-loop j: 2 .
## [1] &quot;skip&quot;
## [1] &quot;skip&quot;
## Outer-loop i:  3 .
## Inner-loop j: 1 .
## Inner-loop j: 2 .
## Inner-loop j: 3 .
## [1] &quot;skip&quot;</code></pre>
</div>
</section><section id="break" class="slide level2">
<h2>Break</h2>
<ul>
<li>The <code>break</code> statement allows us to break out out of a for, while loop (of the smallest enclosing).</li>
<li>The control is transferred to the first statement outside the inner-most loop.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)  {
  <span class="cf">if</span> (i <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)  {
    <span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;Coming out from for loop Where i = &quot;</span>, i))
    <span class="cf">break</span>
  }
  <span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;i is now: &quot;</span>, i))
}</code></pre></div>
<pre><code>## [1] &quot;i is now:  1&quot;
## [1] &quot;i is now:  2&quot;
## [1] &quot;i is now:  3&quot;
## [1] &quot;i is now:  4&quot;
## [1] &quot;i is now:  5&quot;
## [1] &quot;Coming out from for loop Where i =  6&quot;</code></pre>
</section><section id="exercise-2" class="slide level2">
<h2>Exercise 2</h2>
<p></br></p>
<ul>
<li><p>Go back to “Lec2_ex.Rmd” in RStudio.</p></li>
<li><p>Do Exercise 2.</p></li>
</ul>
</section><section id="functions" class="slide level2">
<h2>Functions</h2>
</section><section id="functions-1" class="slide level2">
<h2>Functions</h2>
<ul>
<li><p>A <strong>function</strong> is a procedure/routine that performs a specific task.</p></li>
<li><p>Functions are used to <strong>abstract</strong> components of larger program.</p></li>
<li><p>They are like a mathematical functions. They <strong>take some input and then do something to find the result</strong>.</p></li>
<li><p>Functions allow you to <strong>automate common tasks</strong> in a more powerful and general way than copy-and-pasting.</p></li>
<li><p>A general rule is that you should <strong>use a function, whenever you’ve copied and pasted a block of code more than twice</strong>.</p></li>
</ul>
</section><section id="function-definition" class="slide level2">
<h2>Function Definition</h2>
<div class="left" ,="" style="width: 40%">
<ul>
<li><p>To define a function you assigne a variable name to a <code>function</code> object.</p></li>
<li><p>Functions take <strong>arguments, mandatory and optional</strong>.</p></li>
<li><p>Provide the brief <strong>description of your function in comments</strong> before the function definition.</p></li>
</ul>
</div>
<div class="right" ,="" style="width: 60%">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Computes mean and standard deviation</span>
<span class="co"># and optionally prints the results.</span>
mysummary &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">print=</span><span class="ot">TRUE</span>) {
  center &lt;-<span class="st"> </span><span class="kw">mean</span>(x)
  spread &lt;-<span class="st"> </span><span class="kw">sd</span>(x) 
  <span class="cf">if</span> (print) {
    <span class="kw">cat</span>(<span class="st">&quot;Mean =&quot;</span>, center, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, 
        <span class="st">&quot;SD = &quot;</span>, spread, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)
  }
  result &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">mean=</span>center, 
                 <span class="dt">sd=</span>spread)
  <span class="kw">return</span>(result)
}</code></pre></div>
</div>
</section><section id="calling-functions" class="slide level2">
<h2>Calling functions</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">500</span>, <span class="dt">mean =</span> <span class="dv">4</span>, <span class="dt">sd =</span> <span class="dv">1</span>) 
y &lt;-<span class="st"> </span><span class="kw">mysummary</span>(x)</code></pre></div>
<pre><code>## Mean = 4.027061 
##  SD =  1.02358</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># without printing</span>
y &lt;-<span class="st"> </span><span class="kw">mysummary</span>(x, <span class="dt">print =</span> <span class="ot">FALSE</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Results are stored in list &quot;y&quot;</span>
y<span class="op">$</span>mean</code></pre></div>
<pre><code>## [1] 4.027061</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y<span class="op">$</span>sd</code></pre></div>
<pre><code>## [1] 1.02358</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># The order of arguments does not matter if the names are specified</span>
y &lt;-<span class="st"> </span><span class="kw">mysummary</span>(<span class="dt">print=</span><span class="ot">FALSE</span>, <span class="dt">x =</span> x)</code></pre></div>
</section><section id="exercise-3" class="slide level2">
<h2>Exercise 3</h2>
<p></br></p>
<ul>
<li><p>Go back to “Lec2_ex.Rmd” in RStudio.</p></li>
<li><p>Do Exercise 3.</p></li>
</ul>
</section><section id="apply-lapply-sapply-functions" class="slide level2">
<h2>apply, lapply, sapply functions</h2>
<ul>
<li><p>The <code>apply</code> family functions, are <strong>functions to manipulate slices of data</strong> from matrices, arrays, lists and dataframes <strong>in a repetitive way</strong>.</p></li>
<li><p>These functions <strong>avoid explicit use of loops</strong>. <code>apply</code> might be <strong>computationally more efficient than for loops</strong>, depending on how big your data is. For more details see this <a href="https://www.r-bloggers.com/gnu-r-loop-speed-comparison/">link</a>.</p></li>
<li><p>The apply functions allow you to perform operations with <strong>very few lines of code.</strong></p></li>
<li><p>The family comprises: <strong>apply, lapply , sapply, vapply, mapply, rapply, and tapply</strong>. The difference lies in the structure of input data and the desired format of the output).</p></li>
</ul>
</section><section id="lapplysapply-functions" class="slide level2">
<h2>lapply/sapply functions</h2>
<div class="left" ,="" style="width: 50%">
<ul>
<li><p><code>lapply()</code> is used to <strong>repeatedly apply a function to a elements of sequential objects</strong> such as vectors, lists, or data-frames (applies to columns).</p></li>
<li><p>The <strong>output returned is a list</strong> with the same number of elements as the input object.</p></li>
<li><p><code>sapply</code> is the same as <code>lapply</code> but returns a “simplified” output.</p></li>
<li><p>user-defined functions can be used with <code>sapply/lapply</code></p></li>
</ul>
</div>
<div class="right" ,="" style="width: 50%">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lapply</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="cf">function</span>(x) x<span class="op">^</span><span class="dv">2</span>)</code></pre></div>
<pre><code>## [[1]]
## [1] 1
## 
## [[2]]
## [1] 4
## 
## [[3]]
## [1] 9</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unlist</span>(<span class="kw">lapply</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="cf">function</span>(x) x<span class="op">^</span><span class="dv">2</span>))</code></pre></div>
<pre><code>## [1] 1 4 9</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sapply</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="cf">function</span>(x) x<span class="op">^</span><span class="dv">2</span>)</code></pre></div>
<pre><code>## [1] 1 4 9</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sapply</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="cf">function</span>(x) x<span class="op">^</span><span class="dv">2</span>, <span class="dt">simplify =</span> F)</code></pre></div>
<pre><code>## [[1]]
## [1] 1
## 
## [[2]]
## [1] 4
## 
## [[3]]
## [1] 9</code></pre>
</div>
</section><section id="apply-function" class="slide level2">
<h2>apply function</h2>
<p><code>apply</code> operates on arrays/matrices. In the example below we obtain column sums of matrix “X”.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(X &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">sample</span>(<span class="dv">30</span>), <span class="dt">nrow =</span> <span class="dv">5</span>, <span class="dt">ncol =</span> <span class="dv">6</span>))</code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6]
## [1,]    4    5   14   26   11   25
## [2,]    2   12   20    6    8   28
## [3,]   21   10   29   13   17   19
## [4,]   16    1   15   27   22    9
## [5,]   18    7   23    3   30   24</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span>(X, <span class="dt">MARGIN =</span> <span class="dv">2</span> , <span class="dt">FUN =</span> sum)</code></pre></div>
<pre><code>## [1]  61  35 101  75  88 105</code></pre>
<p><strong>Note:</strong> that in a matrix <code>MARGIN=1</code> indicates rows and <code>MARGIN=2</code> indicates columns.</p>
</section><section id="apply-function-1" class="slide level2">
<h2>apply function</h2>
<div class="left" ,="" style="width: 50%">
<ul>
<li><code>apply</code> can be used with <strong>user-defined functions</strong>:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(X)</code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6]
## [1,]    4    5   14   26   11   25
## [2,]    2   12   20    6    8   28
## [3,]   21   10   29   13   17   19
## [4,]   16    1   15   27   22    9
## [5,]   18    7   23    3   30   24</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span>(X, <span class="dv">2</span>, <span class="cf">function</span>(x) <span class="kw">sum</span>(x <span class="op">&lt;</span><span class="st"> </span><span class="dv">15</span>)) <span class="co"># number entries &lt; 15</span></code></pre></div>
<pre><code>## [1] 2 5 1 3 2 1</code></pre>
</div>
<div class="right" ,="" style="width: 50%">
<ul>
<li>The function can be defined outside <code>apply()</code>,</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">logColMeans &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">eps =</span> <span class="ot">NULL</span>) {
  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(eps)) x &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>eps
  <span class="kw">return</span>(<span class="kw">mean</span>(x))
}
<span class="kw">apply</span>(X, <span class="dv">2</span>, logColMeans) </code></pre></div>
<pre><code>## [1] 12.2  7.0 20.2 15.0 17.6 21.0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span>(X, <span class="dv">2</span>, logColMeans, <span class="dt">eps =</span> <span class="fl">0.1</span>) </code></pre></div>
<pre><code>## [1] 12.3  7.1 20.3 15.1 17.7 21.1</code></pre>
</div>
</section><section id="mapply-functions" class="slide level2">
<h2>mapply functions</h2>
<ul>
<li><code>mapply</code> stands for ‘multivariate’ apply. It <strong>applies a function to a multiple list or multiple vectors as arguments</strong>.</li>
<li>The goal is to vectorize arguments to a function which usually does not accept vectors as arguments.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># function word() returns a string of character C repeated k times.</span>
word &lt;-<span class="st"> </span><span class="cf">function</span>(C,k) <span class="kw">paste</span>(<span class="kw">rep.int</span>(C,k), <span class="dt">collapse=</span><span class="st">&#39;&#39;</span>)
<span class="kw">mapply</span>(word, LETTERS[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>], <span class="dv">6</span><span class="op">:</span><span class="dv">1</span>, <span class="dt">SIMPLIFY =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>## $A
## [1] &quot;AAAAAA&quot;
## 
## $B
## [1] &quot;BBBBB&quot;
## 
## $C
## [1] &quot;CCCC&quot;
## 
## $D
## [1] &quot;DDD&quot;
## 
## $E
## [1] &quot;EE&quot;
## 
## $F
## [1] &quot;F&quot;</code></pre>
</section><section id="exercise-4" class="slide level2">
<h2>Exercise 4</h2>
<p></br></p>
<ul>
<li><p>Go back to “Lec2_ex.Rmd” in RStudio.</p></li>
<li><p>Do Exercise 4.</p></li>
</ul>
</section></section>
    </div>
  </div>

  <script src="libs/reveal.js-3.3.0.1/lib/js/head.min.js"></script>
  <script src="libs/reveal.js-3.3.0.1/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        // Display the page number of the current slide
        slideNumber: true,
        // Push each slide change to the browser history
        history: true,
        // Vertical centering of slides
        center: true,
        // Opens links in an iframe preview overlay
        previewLinks: true,
        // Transition style
        transition: 'default', // none/fade/slide/convex/concave/zoom
        // Transition style for full page slide backgrounds
        backgroundTransition: 'default', // none/fade/slide/convex/concave/zoom



        // Optional reveal.js plugins
        dependencies: [
        ]
      });
    </script>
  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

<script>
  (function() {
    if (window.jQuery) {
      Reveal.addEventListener( 'slidechanged', function(event) {  
        window.jQuery(event.previousSlide).trigger('hidden');
        window.jQuery(event.currentSlide).trigger('shown');
      });
    }
  })();
</script>


  </body>
</html>
